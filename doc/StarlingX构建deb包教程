StarlingX 构建deb包教程

官方教程：https://github.com/starlingx-staging/stx-packaging

1、通过sudo docker load -i pbuilder.tar.gz命令将导入镜像

2、执行docker run -d --name test_build --privileged=true pbuilder:16.04命令创建并运行容器

3、通过镜像创建容器后，需要更改/etc/apt/source.list文件，修改为
# deb cdrom:[Ubuntu 16.04 LTS _Xenial Xerus_ - Release amd64 (20160420.1)]/ xenial main restricted
deb-src http://archive.ubuntu.com/ubuntu xenial main restricted #Added by software-properties
deb http://mirrors.aliyun.com/ubuntu/ xenial main restricted
deb-src http://mirrors.aliyun.com/ubuntu/ xenial main restricted multiverse universe #Added by software-properties
deb http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted
deb-src http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted multiverse universe #Added by software-properties
deb http://mirrors.aliyun.com/ubuntu/ xenial universe
deb http://mirrors.aliyun.com/ubuntu/ xenial-updates universe
deb http://mirrors.aliyun.com/ubuntu/ xenial multiverse
deb http://mirrors.aliyun.com/ubuntu/ xenial-updates multiverse
deb http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse #Added by software-properties
deb http://archive.canonical.com/ubuntu xenial partner
deb-src http://archive.canonical.com/ubuntu xenial partner
deb http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted
deb-src http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted multiverse universe #Added by software-properties
deb http://mirrors.aliyun.com/ubuntu/ xenial-security universe
deb http://mirrors.aliyun.com/ubuntu/ xenial-security multiverse

4、下载stx-packaging工程并执行setup脚本
git clone https://github.com/starlingx-staging/stx-packaging.git
cd stx-packaging
bash setup.sh

5、修改～/.pbuilderrc文件中的http://archive.ubuntu.com/ubuntu改为http://mirrors.aliyun.com/ubuntu/

6、在stx-packaging/fault/fm-common/sources/目录下创建debian目录，创建两个新文件（其中fm-common为要构建的deb包名称，1.0为构建后的版本）：
（1）changelog
fm-common (1.0) unstable; urgency=medium.  

  * Initial release

 -- root <test@99cloud.net>  Fri, 15 Nov 2019 03:57:21 +0000
(2)compat
11

7、修改完毕后执行make package PKG=fault/fm-common DISTRO=debian命令即可构建deb包，创建成功后deb包存放在stx-packaging/fault目录对应工程下debian/results目录下
